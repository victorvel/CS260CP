YUI.add("hermes-template-photo-page-scrappy",function(e,t){var a=e.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(e,t,a,l,o){var n=null!=t?t:{},u=a.helperMissing,r=e.escapeExpression;return r((a.outlet||t&&t.outlet||u).call(n,null!=t?t["global-nav-view"]:t,{name:"outlet",hash:{},data:o}))+"\n"+r((a.outlet||t&&t.outlet||u).call(n,null!=t?t["photo-well-view"]:t,{name:"outlet",hash:{},data:o}))+"\n"+r((a.outlet||t&&t.outlet||u).call(n,null!=t?t["sub-photo-view"]:t,{name:"outlet",hash:{},data:o}))+"\n"+r((a.outlet||t&&t.outlet||u).call(n,null!=t?t["signup-footer-view"]:t,{name:"outlet",hash:{},data:o}))+"\n"+r((a.outlet||t&&t.outlet||u).call(n,null!=t?t["footer-full-view"]:t,{name:"outlet",hash:{},data:o}))+"\n"},useData:!0}),l={};e.Array.each([],function(t){var a=e.Template.get("hermes/"+t);a&&(l[t]=a)}),e.Template.register("hermes/photo-page-scrappy",function(t,o){return o=o||{},o.partials=o.partials?e.merge(l,o.partials):l,a(t,o)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("safety-level-helper",function(e){e.SafetyHelper={getSafetyLevelString:function(e,r){return e=parseInt(e),"search"===r&&(e-=1),1===e?"moderate":2===e?"restricted":"safe"}}},"@VERSION@",{requires:[]});YUI.add("yui-throttle",function(e,t){
/*! Based on work by Simon Willison: http://gist.github.com/292562 */
;e.throttle=function(t,n){n=n?n:e.config.throttleTime||150;if(n===-1)return function(){t.apply(this,arguments)};var r=e.Lang.now();return function(){var i=e.Lang.now();i-r>n&&(r=i,t.apply(this,arguments))}}},"3.16.0",{requires:["yui-base"]});
YUI.add("hermes-template-photo-well-scrappy",function(a,e){var l=a.Template.Handlebars.revive({1:function(a,e,l,n,t){return" enable-zoom"},3:function(a,e,l,n,t){return" no-click"},5:function(a,e,l,n,t){return" is-hidden"},7:function(a,e,l,n,t){var i;return a.escapeExpression("function"==typeof(i=null!=(i=l["prev-url"]||(null!=e?e["prev-url"]:e))?i:l.helperMissing)?i.call(null!=e?e:{},{name:"prev-url",hash:{},data:t}):i)},9:function(a,e,l,n,t){return"#"},11:function(a,e,l,n,t){var i;return a.escapeExpression("function"==typeof(i=null!=(i=l["prev-title"]||(null!=e?e["prev-title"]:e))?i:l.helperMissing)?i.call(null!=e?e:{},{name:"prev-title",hash:{},data:t}):i)},13:function(a,e,l,n,t){var i;return a.escapeExpression("function"==typeof(i=null!=(i=l["next-url"]||(null!=e?e["next-url"]:e))?i:l.helperMissing)?i.call(null!=e?e:{},{name:"next-url",hash:{},data:t}):i)},15:function(a,e,l,n,t){var i;return a.escapeExpression("function"==typeof(i=null!=(i=l["next-title"]||(null!=e?e["next-title"]:e))?i:l.helperMissing)?i.call(null!=e?e:{},{name:"next-title",hash:{},data:t}):i)},17:function(a,e,l,n,t){var i=null!=e?e:{},r=l.helperMissing,s=a.escapeExpression;return"\t\t"+s((l.outlet||e&&e.outlet||r).call(i,null!=e?e["photo-sidebar-toggle-view"]:e,{name:"outlet",hash:{},data:t}))+"\n\t\t"+s((l.outlet||e&&e.outlet||r).call(i,null!=e?e["attribution-view"]:e,{name:"outlet",hash:{},data:t}))+"\n\t\t"+s((l.outlet||e&&e.outlet||r).call(i,null!=e?e["people-notes-view"]:e,{name:"outlet",hash:{},data:t}))+"\n\t\t"+s((l.outlet||e&&e.outlet||r).call(i,null!=e?e["photo-engagement-view"]:e,{name:"outlet",hash:{},data:t}))+"\n"},19:function(a,e,l,n,t){var i,r=null!=e?e:{},s=l.helperMissing,o=a.escapeExpression;return"\t\t<a class='entry-type do-not-evict' href='"+o("function"==typeof(i=null!=(i=l.entryURL||(null!=e?e.entryURL:e))?i:s)?i.call(r,{name:"entryURL",hash:{},data:t}):i)+'\'><div class="icon"></div> '+o("function"==typeof(i=null!=(i=l.backToLabel||(null!=e?e.backToLabel:e))?i:s)?i.call(r,{name:"backToLabel",hash:{},data:t}):i)+"</a>\n"},21:function(a,e,l,n,t){var i,r=null!=e?e:{},s=l.helperMissing,o=a.escapeExpression;return'\t\t<a href="'+o("function"==typeof(i=null!=(i=l.similaritySearchURL||(null!=e?e.similaritySearchURL:e))?i:s)?i.call(r,{name:"similaritySearchURL",hash:{},data:t}):i)+'" class="similarity-search-link" data-track="photoPageSimilaritySearchClick" title="'+o((l.intlMessage||e&&e.intlMessage||s).call(r,{name:"intlMessage",hash:{intlName:"common.SEARCH_FOR_SIMILAR_PHOTOS"},data:t}))+'"><svg class="icon icon-search"><use xlink:href="#icon-search"></use></svg></a>\n'},23:function(a,e,l,n,t){return"\t\t"+a.escapeExpression((l.outlet||e&&e.outlet||l.helperMissing).call(null!=e?e:{},null!=e?e["photo-limit-overlay-view"]:e,{name:"outlet",hash:{},data:t}))+"\n"},compiler:[7,">= 4.0.0"],main:function(a,e,l,n,t){var i,r,s=null!=e?e:{},o=l.helperMissing,u=a.escapeExpression;return'<div class="height-controller'+(null!=(i=l.if.call(s,null!=e?e.enableZoom:e,{name:"if",hash:{},fn:a.program(1,t,0),inverse:a.noop,data:t}))?i:"")+'" style="height: '+u("function"==typeof(r=null!=(r=l.height||(null!=e?e.height:e))?r:o)?r.call(s,{name:"height",hash:{},data:t}):r)+'px;">\n\n\t<a class="navigate-target navigate-prev'+(null!=(i=l.if.call(s,null!=e?e["prev-is-not-clickable"]:e,{name:"if",hash:{},fn:a.program(3,t,0),inverse:a.noop,data:t}))?i:"")+(null!=(i=l.if.call(s,null!=e?e["is-hidden"]:e,{name:"if",hash:{},fn:a.program(5,t,0),inverse:a.noop,data:t}))?i:"")+'" href="'+(null!=(i=l.if.call(s,null!=e?e["prev-url"]:e,{name:"if",hash:{},fn:a.program(7,t,0),inverse:a.program(9,t,0),data:t}))?i:"")+'" title="'+(null!=(i=l.if.call(s,null!=e?e["prev-url"]:e,{name:"if",hash:{},fn:a.program(11,t,0),inverse:a.noop,data:t}))?i:"")+'" data-track="prevPhotoButtonClick" data-action="ad" style="height: '+u("function"==typeof(r=null!=(r=l.navHeight||(null!=e?e.navHeight:e))?r:o)?r.call(s,{name:"navHeight",hash:{},data:t}):r)+'px;"><span class="hide-text">&larr;</span></a>\n\n\t'+u((l.outlet||e&&e.outlet||o).call(s,null!=e?e["photo-well-media-view"]:e,{name:"outlet",hash:{},data:t}))+"\n\t"+u((l.outlet||e&&e.outlet||o).call(s,null!=e?e["photo-notes-scrappy-view"]:e,{name:"outlet",hash:{},data:t}))+'\n\n\t<a class="navigate-target navigate-next'+(null!=(i=l.if.call(s,null!=e?e["next-is-not-clickable"]:e,{name:"if",hash:{},fn:a.program(3,t,0),inverse:a.noop,data:t}))?i:"")+(null!=(i=l.if.call(s,null!=e?e["is-hidden"]:e,{name:"if",hash:{},fn:a.program(5,t,0),inverse:a.noop,data:t}))?i:"")+'" href="'+(null!=(i=l.if.call(s,null!=e?e["next-url"]:e,{name:"if",hash:{},fn:a.program(13,t,0),inverse:a.program(9,t,0),data:t}))?i:"")+'"  title="'+(null!=(i=l.if.call(s,null!=e?e["next-url"]:e,{name:"if",hash:{},fn:a.program(15,t,0),inverse:a.noop,data:t}))?i:"")+'" data-track="nextPhotoButtonClick" data-action="ad" style="height: '+u("function"==typeof(r=null!=(r=l.navHeight||(null!=e?e.navHeight:e))?r:o)?r.call(s,{name:"navHeight",hash:{},data:t}):r)+'px;"><span class="hide-text">&rarr;</span></a>\n\n'+(null!=(i=l.unless.call(s,null!=e?e["is-ad"]:e,{name:"unless",hash:{},fn:a.program(17,t,0),inverse:a.noop,data:t}))?i:"")+"\n"+(null!=(i=l.unless.call(s,null!=e?e.hideBackToLink:e,{name:"unless",hash:{},fn:a.program(19,t,0),inverse:a.noop,data:t}))?i:"")+"\n"+(null!=(i=l.if.call(s,null!=e?e.similaritySearchURL:e,{name:"if",hash:{},fn:a.program(21,t,0),inverse:a.noop,data:t}))?i:"")+"\n\t"+u((l.outlet||e&&e.outlet||o).call(s,null!=e?e["context-slider-view"]:e,{name:"outlet",hash:{},data:t}))+"\n\n"+(null!=(i=l.if.call(s,null!=e?e.showPhotoLimitOverlay:e,{name:"if",hash:{},fn:a.program(23,t,0),inverse:a.noop,data:t}))?i:"")+"</div>\n"},useData:!0}),n={};a.Array.each([],function(e){var l=a.Template.get("hermes/"+e);l&&(n[e]=l)}),a.Template.register("hermes/photo-well-scrappy",function(e,t){return t=t||{},t.partials=t.partials?a.merge(n,t.partials):n,l(e,t)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-photo-page-right-size-express",function(t,e){var n=t.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(t,e,n,i,o){var a,h=null!=e?e:{},l=n.helperMissing,r=t.escapeExpression;return'\n<script type="text/javascript" nonce="'+r("function"==typeof(a=null!=(a=n.cspNonce||(null!=e?e.cspNonce:e))?a:l)?a.call(h,{name:"cspNonce",hash:{},data:o}):a)+'">\n\n\t(function(){\n\n\t\tvar PADDING_HORIZONTAL = 40;\n\n\t\twindow.getPhotoWellHeight = function () {\n\n\t\t\tvar minHeight = 500,\n\t\t\t    winWidth = window.innerWidth,\n\t\t\t    winHeight = window.innerHeight - 50,\n\t\t\t    ratioNarrow = 1,\n\t\t\t    ratioRegular = 2.3,\n\t\t\t    ratioTransitional = 2.75,\n\t\t\t    idealSubphotoHeight = 120,\n\t\t\t    breakHeightNarrow = (winWidth / ratioNarrow) + idealSubphotoHeight,\n\t\t\t    breakHeightRegular = (winWidth / ratioRegular) + idealSubphotoHeight,\n\t\t\t    breakHeightTransitional = winWidth / ratioTransitional,\n\t\t\t    newPhotoWellHeight;\n\n\t\t\tif (winHeight > breakHeightNarrow) {\n\n\t\t\t\tnewPhotoWellHeight = winWidth / ratioNarrow;\n\n\t\t\t} else if (winHeight > breakHeightRegular) {\n\n\t\t\t\tnewPhotoWellHeight = winHeight - idealSubphotoHeight;\n\n\t\t\t} else if (winHeight > breakHeightTransitional) {\n\n\t\t\t\tnewPhotoWellHeight = winHeight - idealSubphotoHeight + idealSubphotoHeight * (winHeight - breakHeightRegular) / (breakHeightTransitional - breakHeightRegular);\n\n\t\t\t} else {\n\n\t\t\t\tnewPhotoWellHeight = winHeight;\n\n\t\t\t}\n\n\t\t\treturn Math.max(minHeight, Math.round(newPhotoWellHeight));\n\n\t\t}\n\n\t\tfunction domReady () {\n\n\t\t\ttry {\n\n\t\t\t\tif (document.getElementsByClassName("low-res-photo")[0]) {\n\n\t\t\t\t\tvar photoWellView = document.getElementsByClassName("photo-well-scrappy-view")[0],\n\t\t\t\t\t    heightController = photoWellView.getElementsByClassName("height-controller")[0],\n\t\t\t\t\t    photoWellMediaView = document.getElementsByClassName("photo-well-media-scrappy-view")[0],\n\t\t\t\t\t    lowResImageElement = photoWellMediaView.getElementsByClassName("low-res-photo")[0],\n\t\t\t\t\t    photoWidth = '+r("function"==typeof(a=null!=(a=n.photoWidth||(null!=e?e.photoWidth:e))?a:l)?a.call(h,{name:"photoWidth",hash:{},data:o}):a)+",\n\t\t\t\t\t    photoHeight = "+r("function"==typeof(a=null!=(a=n.photoHeight||(null!=e?e.photoHeight:e))?a:l)?a.call(h,{name:"photoHeight",hash:{},data:o}):a)+',\n\t\t\t\t\t    photoAspectRatio = photoWidth / photoHeight,\n\t\t\t\t\t    photoWellHeight = window.getPhotoWellHeight(),\n\t\t\t\t\t    photoWellMediaViewPadding = {\n\t\t\t\t\t        top: parseInt(getComputedStyle(photoWellMediaView)[\'paddingTop\'].match(/[0-9]+/)[0], 10),\n\t\t\t\t\t        right: PADDING_HORIZONTAL,\n\t\t\t\t\t        bottom: parseInt(getComputedStyle(photoWellMediaView)[\'paddingBottom\'].match(/[0-9]+/)[0], 10),\n\t\t\t\t\t        left: PADDING_HORIZONTAL\n\t\t\t\t\t    },\n\t\t\t\t\t    canvasSize = {\n\t\t\t\t\t        height: photoWellHeight - photoWellMediaViewPadding.top - photoWellMediaViewPadding.bottom,\n\t\t\t\t\t        width: window.innerWidth - photoWellMediaViewPadding.left - photoWellMediaViewPadding.right\n\t\t\t\t\t    };\n\n\t\t\t\t\theightController.style.height = photoWellHeight + "px";\n\n\t\t\t\t\tif (photoWidth <= canvasSize.width && photoHeight <= canvasSize.height) {\n\t\t\t\t\t\tlowResImageElement.style.height = photoHeight + "px";\n\t\t\t\t\t\tlowResImageElement.style.width = photoWidth + "px";\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (photoAspectRatio < 1 || Math.round(canvasSize.width / photoAspectRatio) > canvasSize.height) {\n\t\t\t\t\t\t\tlowResImageElement.style.height = canvasSize.height + "px";\n\t\t\t\t\t\t\tlowResImageElement.style.width = Math.round(canvasSize.height * photoAspectRatio) + "px";\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tlowResImageElement.style.height = Math.round(canvasSize.width / photoAspectRatio) + "px";\n\t\t\t\t\t\t\tlowResImageElement.style.width = canvasSize.width + "px";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t} catch (e) {\n\t\t\t\tif (window.sendRequest) {\n\t\t\t\t\twindow.sendRequest(\'flickr.hermes.photoDimensionCorrectionError\', \'There was a JS error when trying to correct a server rendered photo.\');\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\n\t\tif (document.readyState != \'loading\'){\n\t\t\tdomReady();\n\t\t} else {\n\t\t\tdocument.addEventListener(\'DOMContentLoaded\', domReady);\n\t\t}\n\n\t}());\n\n<\/script>\n'},useData:!0}),i={};t.Array.each([],function(e){var n=t.Template.get("hermes/"+e);n&&(i[e]=n)}),t.Template.register("hermes/photo-page-right-size-express",function(e,o){return o=o||{},o.partials=o.partials?t.merge(i,o.partials):i,n(e,o)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-photo-limit-overlay",function(e,a){var l=e.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(e,a,l,t,i){var s;return'<div class="photo-limit-overlay '+e.escapeExpression("function"==typeof(s=null!=(s=l.additionalClasses||(null!=a?a.additionalClasses:a))?s:l.helperMissing)?s.call(null!=a?a:{},{name:"additionalClasses",hash:{},data:i}):s)+'">\n\t<div class="panel-container">\n\t</div>\n</div>\n'},useData:!0}),t={};e.Array.each([],function(a){var l=e.Template.get("hermes/"+a);l&&(t[a]=l)}),e.Template.register("hermes/photo-limit-overlay",function(a,i){return i=i||{},i.partials=i.partials?e.merge(t,i.partials):t,l(a,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-photo-limit-panel",function(n,e){var t=n.Template.Handlebars.revive({1:function(n,e,t,a,r){return" active"},3:function(n,e,t,a,r){return" hidden off-right"},5:function(n,e,t,a,r){return'<p class="sub-text">'+n.escapeExpression((t.preventOrphans||e&&e.preventOrphans||t.helperMissing).call(null!=e?e:{},null!=e?e.subText:e,{name:"preventOrphans",hash:{},data:r}))+"</p>"},compiler:[7,">= 4.0.0"],main:function(n,e,t,a,r){var l,s,p=null!=e?e:{},i=t.helperMissing,u=n.escapeExpression;return'<div class="panel'+(null!=(l=t.if.call(p,null!=e?e.initialActive:e,{name:"if",hash:{},fn:n.program(1,r,0),inverse:n.program(3,r,0),data:r}))?l:"")+'" data-panel-index="'+u("function"==typeof(s=null!=(s=t.panelIndex||(null!=e?e.panelIndex:e))?s:i)?s.call(p,{name:"panelIndex",hash:{},data:r}):s)+'">\n\t<div class="panel-content">\n\t\t<h2>'+u((t.preventOrphans||e&&e.preventOrphans||i).call(p,null!=e?e.title:e,{name:"preventOrphans",hash:{},data:r}))+'</h2>\n\t\t<div class="description-container">\n\t\t\t'+u((t.renderTrustedMarkup||e&&e.renderTrustedMarkup||i).call(p,null!=e?e.description:e,{name:"renderTrustedMarkup",hash:{},data:r}))+'\n\t\t</div>\n\n\t\t<div class="button-container">\n\t\t\t<a href="/account/upgrade/pro?select" class="button accept-button pro-link">'+u((t.preventOrphans||e&&e.preventOrphans||i).call(p,null!=e?e.acceptButtonText:e,{name:"preventOrphans",hash:{},data:r}))+'</a>\n\t\t\t<button class="button unfluid decline-button">'+u((t.preventOrphans||e&&e.preventOrphans||i).call(p,null!=e?e.declineButtonText:e,{name:"preventOrphans",hash:{},data:r}))+"</button>\n\t\t</div>\n\n\t\t"+(null!=(l=t.if.call(p,null!=e?e.subText:e,{name:"if",hash:{},fn:n.program(5,r,0),inverse:n.noop,data:r}))?l:"")+"\n\t</div>\n</div>\n"},useData:!0}),a={};n.Array.each([],function(e){var t=n.Template.get("hermes/"+e);t&&(a[e]=t)}),n.Template.register("hermes/photo-limit-panel",function(e,r){return r=r||{},r.partials=r.partials?n.merge(a,r.partials):a,t(e,r)})},"@VERSION@",{requires:["template-base","handlebars-base"]});