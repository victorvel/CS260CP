YUI.add("anchor-repositioner",function(n,e){require("hermes-core/flog")(e);var o=10,i=.25;n.AnchorRepositioner=(function(){function e(){return d.reduce(function(n,e){return n+e.y},0)}function t(){var e,o=n.config.win.location.hash.replace("#","");o&&(e=n.one('[id="'+o+'"], [name="'+o+'"]'))&&r(e)}function r(e){e instanceof n.Node||(e=n.one(e)),s=e}function c(t,c,f){var u,a,d;f=void 0!==f?f:o,c=void 0!==c?c:i,t&&r(t),s&&(s.scrollIntoView(!0),u=n.config.win.scrollY||n.config.win.pageYOffset,a=Math.ceil(s.getY()),d=e()+f,a>=u&&a<=u+d&&(l&&l.stop(),0===c?n.config.win.scrollTo(0,a-d):((l=new n.Anim({duration:c,node:"win",easing:"easeOut",to:{scroll:[0,a-d]}})).on("end",function(n){l=null}),l.run())))}function f(e,o){o instanceof n.Node&&(function(n,e){d.push({key:n,y:e})})(e,parseInt(o.getComputedStyle("height"),10))}function u(n){return d.some(function(e,o){if(e.key===n)return d.splice(o,1),!0})}var a,s,l,d=[];return a||(t(),n.on("hashchange",function(n){t(),c()},n.config.win),a={addOffset:f,removeOffset:u,jumpTo:c,getTotalOffset:e}),a})()},"@VERSION@",{requires:["node","anim"]});YUI.add("atics",function(e,n){e.Analytics=(function(){function n(){return document.querySelectorAll("script[src*=adobedtm\\.com]").length<2||!window.s}function a(e){c=e=void 0===e||e,n()&&(c=!1),l("Adobe Analytics enabled: "+c)}function t(e){l("Debugging logging enabled: "+(p=e=void 0===e||e))}function i(e,n){n=n||"CTA Link Clicked",window.appEventData.push({linkInfo:{linkId:e},event:n})}function o(e){if(!n())try{e=e||window.appContext.flapp.get("activeView").name,c&&(!(function(e,n){var a,t={bubbles:!0,cancelable:!0,detail:n};document.createEvent&&document.body.dispatchEvent?((a=document.createEvent("CustomEvent")).initCustomEvent(e,t.bubbles,t.cancelable,t.detail),document.body.dispatchEvent(a)):window.CustomEvent&&document.body.dispatchEvent&&(a=new CustomEvent(e,t),document.body.dispatchEvent(a))})("sendPageView",window.dataLayer),l("Adobe Analytics PageView: "+e+", "+document.location.pathname))}catch(e){l(e)}}function r(){var n=window.appContext.flapp.get("activeView");l("learning"),window.dataLayer={page:{pageInfo:{pageID:"",pageName:"",destinationURL:"",referringURL:"",onsiteSearchTerm:"",language:"",country:"",geoRegion:"",author:"",pageType:"",safetyLevel:""}},product:[],events:[],cart:{},transaction:{transactionID:"",total:{basePrice:0,voucherCode:"",voucherDiscount:0,currency:"",taxRate:0,shipping:0,shippingMethod:"",priceWithTax:0,transactionTotal:0,item:[]}},user:{profile:{profileInfo:{profileID:"",userName:"",language:"",intl:"",signedIn:""},address:"",social:{facebook:"",facebookInfo:"",twitter:"",twitterInfo:""},segment:{isNewRegistration:null,isUserNewCustomer:null,isLoggedIn:null,customerClassDimension:"",visitorLifetimeValue:0}}},feed:{layoutType:"",isInsideOverlay:null,filterType:""},buckets:{}};try{var a=window.appContext&&window.appContext.getViewer?window.appContext.getViewer():null;a&&(a.signedIn?(window.dataLayer.user.profile.profileInfo.signedIn="signedIn",window.dataLayer.user.profile.profileInfo.profileID=a.nsid,window.dataLayer.user.profile.profileInfo.intl=a.intl,window.dataLayer.user.profile.segment.customerClassDimension=a.isPro?"pro":"free"):window.dataLayer.user.profile.profileInfo.signedIn="signedOut"),window.navigator&&window.navigator.language&&(window.dataLayer.user.profile.profileInfo.language=window.navigator.language),window.dataLayer.page.pageInfo.pageID=e.murmurhash(document.title,document.title+" insecure hawaiian volcano salt"),window.dataLayer.page.pageInfo.pageName=n.name,window.dataLayer.page.pageInfo.destinationURL=document.location.href,window.dataLayer.buckets.exploreVersion=window.appContext.flipper.isFlipped("enable-explore-v2-api")?"2":"1"}catch(e){l("learn() blew up.",e)}}function d(n,a){e.Object.setValue(window.dataLayer,n.split("."),a)}function l(e,n){p&&console.info("[Analytics] ",e,n)}var s,c=!1,p=!1;return s||(window.appEventData=window.appEventData||[],e.one("body").delegate("click",function(e){i(e.target.ancestor("[data-link-id]",!0).getAttribute("data-link-id"))},"a[data-link-id]"),s={sendPageView:o,sendClick:i,enableAdobeAnalytics:a,enableDebugging:t,learn:r,setDataLayerProp:d}),s})()},"@VERSION@",{requires:["murmurhash"],affinity:"client"});YUI.add("client-app",function(e,n){function i(){v=!1}function t(n){var i,t,r=window.location,a=window.history,o=!1;if(r.search&&a.replaceState&&(i=e.QueryString.parse(r.search.replace("?","")),n.forEach(function(e){e in i&&(delete i[e],o=!0)}),o)){t=e.QueryString.stringify(i);try{a.replaceState({},"",r.pathname+(t?"?"+t:""))}catch(e){}}}function r(e,n){return new n.Promise(function(i,t){n.use(e,function(e,n){n&&"success"in n?n.success?i(e):t(n.msg):t("Y.use: no status provided")})})}function a(n){var i,t,r,a,o=[],s=["flickr.photos.addView","flickr.groups.updateViewDate","flickr.photos.getPhotos","flickr.people.addView","flickr.photosets.addView"];if(g.getViewCounter().flushQueue(),g.uploadIsInProgress())a=this.intlMessage({intlName:"client-app.UPLOAD_IN_PROGRESS"});else{for(i in g.writeAPICallsMadeOnThisPage)(t=g.writeAPICallsMadeOnThisPage[i]).completed||o.push(t);o.length&&(o.every(function(e){return-1!==s.indexOf(e.methodName)})||(e.config.flickr.requestConfig&&e.config.flickr.requestConfig.auth&&e.config.flickr.requestConfig.auth.isInsecureGod?(r=o.map(function(e){return e.methodName}).join(", "),a=this.intlMessage({intlName:"client-app.SAVING_LAST_ACTIONS"})+" In progress API Methods: "+r):a=this.intlMessage({intlName:"client-app.SAVING_LAST_ACTIONS"})))}return e.Storage.Instance.clear(),a&&((n||window.event).returnValue=a),a}function o(n){if(!v)return window.location=n.url,void n.halt();g.setClientSideRouted(!0),g.setPreviousLocation(),g.updateModelRefetchState(n.url,n.originEvent&&n.originEvent.currentTarget&&n.originEvent.currentTarget.hasClass("do-not-evict")),g.clearWriteAPICallCache(),g.setGPCredentials(null),e.loaderBar.start(),g.adManager.isEnabled()&&g.adManager.currentlyShowingAd&&g.adManager.adIsUnloading(),g.flipper.isFlipped("enable-prebid-ads")&&asc.cmd.push(asc.destroy),g.getKeyboardManager().resetCurrentKeyEventScope(),e.Object.each(g.modelRegistries,function(e,n){e.hasWeakSubscribers&&e.removeWeakSubscribers()}),m=!0}function s(){e.UA.chrome>0&&(window.scrollTo(window.scrollX,window.scrollY+1),window.scrollTo(window.scrollX,window.scrollY-1))}function c(n){e.Object.each(g.modelRegistries,function(e,n){e.hasWeakSubscribers&&e.removeWeakSubscribers()}),e.fire("close-dialogs"),"popstate"===n.src&&s(),"popstate"!==n.src||w.hasRoute(w.getPath())||e.Object.isEmpty(n.newVal)||w.navigate(w.getPath()),g.getViewCounter().flushQueue({resetDuplicateTracking:!0}),m||g.updateModelRefetchState(),m=!1}function l(e){w.set("previousView",e.prevVal)}function u(n,i,t){var r=e.one(document.elementFromPoint(i,t)),a=r.ancestor("[data-scroll-section]",!0);if(a)return a.getAttribute("data-scroll-section");var o,s=r.ancestor(".view",!0);if(s){if((o=s.getAttribute("class").match(/[\S]+-view/)[0])===n.name&&i===window.innerWidth/2){var c=u(n,i/2,t);return c!==n.name?c:u(n,i+i/2,t)}return o}}function d(n){var i=this.get("activeView");if(void 0===i.getViewDataFromHistory("referrer")&&i.setViewDataOnHistory("referrer",g.getPreviousURL()),e.Analytics&&(e.Analytics.learn(),i.updateDataLayer(),e.Analytics.sendPageView()),e.DeferImages.update(),g.adManager.setAdCouldBeShown(!1),e.config.win.onappclientnav)try{e.config.win.onappclientnav()}catch(n){}e.Accessibility.manageFocusOutlines(i),void 0!==window._sift&&window._sift.push&&window._sift.push(["_trackPageview"])}function p(n){return new e.Promise(function(i,r){var a=setTimeout(function(){r(new Error("Initial View Timeout"))},12e3);n.params.appContext=g,w.showContent(e.one("#content > .view"),{view:{name:n.name,config:n.params}},function(n){e.one("body").removeClass("dark-loader"),n._params&&(n._params.keyEventScope=n.name+n._yuid),n.setViewDataOnHistory("referrer",document.referrer),n.set("isRootView",!0),n.initialize().then(function(){e.Analytics&&(e.Analytics.learn(),e.Analytics.enableAdobeAnalytics(window.appContext.flipper.isFlipped("enable-adobe-analytics")),n.updateDataLayer(),e.Analytics.sendPageView()),g.getKeyboardManager().setCurrentKeyEventScope(n.name+n._yuid),s(),e.DeferImages.init(),e.Accessibility.manageFocusOutlines(n),t(["campaignID","linkID"]),(function(){if(e.config.flickr.requestConfig&&e.config.flickr.requestConfig.auth&&e.config.flickr.requestConfig.auth.isInsecureGod){var n=e.all("[data-view-signature]");n.size()&&h.warn("View signature mismatches detected! A view likely modified the `params` object directly.",{views:n.getDOMNodes()})}})(),clearTimeout(a),i()}).then(null,function(e){throw h.error("There was a problem initializing or activating the view.",{err:e}),r(),e})}),w.before("navigate",o),w.before("activeViewChange",l),e.on("history:change",c),w.after("activeViewChange",d)})}function f(n,i,t,r){var a={};return e.Views&&e.Views[n]&&(a[n]={type:e.Views[n],preserve:!1}),w=new e.App({serverRouting:!0,viewContainer:"#content",container:"#content",linkSelector:":not(.server-only-link):not([target=_blank])",scrollToTop:!1,views:a}),new e.FlickrRouter(w,e.config.flickr.routes),r.auth=i,r.flapp=w,g=(function(n){return window.appContext=new e.AppContext(n),window.appContext})(r),g.routeTiming=r.routeTiming,g.routeConfig=r.routeConfig,e.mix(e.Node.DOM_EVENTS,{transitionend:!0,webkitTransitionEnd:!0}),g.flipper.isFlipped("enable-prebid-ads")&&g.allowThirdPartyContent&&e.use("prbd"),g.flipper.isFlipped("enable-snowplow-tracking")&&e.use("snow"),e.ClientTransport.authorize(g),window.addEventListener("unload",function(n){e.ClientTransport.unloading=!0}),window.addEventListener("load",function(n){e.ClientTransport.unloading=!1}),g.modelImportExport.importAll(t)}var g,w,h=require("hermes-core/flog")(n),m=!1,v=e.config.flickr.clientNavEnabled;e.ClientApp={init:function(n){if(void 0===n)return e.Promise.reject({message:"Invalid config object supplied, was undefined."});var o,s,c=n.initialView,l=n.modelExport,u=n.auth,d=this;return u||i(),o=u&&n.auth.signedIn?n.auth.csrf:null,e.config.flickr.csrf.token=o,e.config.flickr.requestConfig={auth:u},n.params.routeTiming=n.routeTiming,n.params.routeConfig=n.routeConfig,t(e.config.flickr.routing_params),window.location.search&&window.location.search.match(/yc=/)&&(s=e.QueryString.parse(window.location.search.replace("?","")),e.config.flickr.ycParam=s.yc),e.transportFactory=function(n,i){return new e.ClientTransport(i)},r(c.name,e).then(function(){return f(c.name,u,l,n.params)}).then(function(){return p(c)}).then(function(){!(function(){var n=e.one("link#rollup-css");n?n.get("sheet")?(g.isCSSLoaded=!0,e.fire("css-loaded")):n.once("load",function(){g.isCSSLoaded=!0,e.fire("css-loaded")}):(g.isCSSLoaded=!0,e.fire("css-loaded"))})(),e.AnchorRepositioner.jumpTo(),e.config.win.addEventListener("beforeunload",a.bind(d))}).then(e.config.win.onappinit)},beforeUnload:a,beforeNavigate:o,_loadInitialView:r,langBundles:["client-app"],disableClientNav:i,getScrollSection:u},e.rapidTracker={beacon:function(){}},e.mix(e.ClientApp,e.Localizable)},"@VERSION@",{requires:["app-base","app-content","router","app-context","client-transport","flickr-router","handlebars-helpers","loader-bar","murmurhash","node","site-key","flickr-promise","global-events","querystring-parse-simple","querystring-stringify-simple","storage-helper","keyboard-manager","dom","overflow-helper","defer-images","accessibility","anchor-repositioner","atics"],affinity:"client",langBundles:["client-app"]});YUI.add("csrf-updater",function(t){"use strict";var e=require("hermes-core/flog")("csrf");t.CsrfUpdater=function(t){this.flickrAPI=t,this._tasks=[]},t.CsrfUpdater.prototype.getKey=function(){return t.config.flickr.csrf.token||null},t.CsrfUpdater.prototype.isExpired=function(){return!!t.config.flickr.csrf.token&&Date.now()/1e3>t.config.flickr.csrf.csrfExpiresAt},t.CsrfUpdater.prototype.invalidate=function(t){var e=this._lastStored||0;if(t||(t=0),!(t<e))return this.setExpired()},t.CsrfUpdater.prototype.setExpired=function(){return t.config.flickr.csrf.csrfExpiresAt=0},t.CsrfUpdater.prototype.store=function(e,r){this._lastStored=Date.now(),r||(r=Math.floor(this._lastStored/1e3)),t.config.flickr.csrf.token=e,t.config.flickr.csrf.csrfFetched=r,t.config.flickr.csrf.csrfExpiresAt=r+t.config.flickr.csrf.fetch_interval,this.drainQueue()},t.CsrfUpdater.prototype.pushToQueue=function(t){this._tasks.push(t)},t.CsrfUpdater.prototype.drainQueue=function(){for(;this._tasks.length;)this._tasks.shift().resolve()},t.CsrfUpdater.prototype.hasQueuedTasks=function(){return!!this._tasks.length},t.CsrfUpdater.prototype.scheduleFutureFetch=function(){t.config.flickr.csrf.token&&(this._timerFutureFetch=setTimeout(this.fetch.bind(this),1e3*t.config.flickr.csrf.fetch_interval))},t.CsrfUpdater.prototype.scheduleRetry=function(e){var r=this,s=this._fetchRuns>4?1:Math.pow(2,(this._fetchRuns||1)-1)/10,i=t.config.flickr.csrf.retry_interval*s;clearTimeout(this._timerRetry),this._timerRetry=setTimeout(function(){r._timerRetry=null,r.fetch(e)},1e3*i)},t.CsrfUpdater.prototype.fetch=function(r){var s=this,i=s.hasQueuedTasks();if(clearTimeout(this._timerFutureFetch),YUI.Env.isServer){if(!r&&(r=new t.Promise(function(t,e){this.resolve=t,this.reject=e}),this.pushToQueue(r),i))return r;this._fetchRuns||(this._fetchRuns=0),this._fetchRuns++,this.flickrAPI.fetchCsrf().then(function(t){var i=t.token;if(!t.token)return e.error("Failed to fetch csrf token",t),void s.scheduleRetry(r);e.log("Received new csrf token",t),s._fetchRuns=0,s.store(i),s.scheduleFutureFetch()},function(t){e.error("Failed to fetch csrf token",{err:t}),s.scheduleRetry(r)})}else t.ClientApp&&t.ClientApp.disableClientNav();return r}},"@VERSION@",{requires:["client-app"]});YUI.add("photo-lite-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{update:e.PhotoModelHelper.updateEngagement},toggleFave:e.PhotoModelHelper.toggleFave,addAsFave:e.PhotoModelHelper.addAsFave,getLargestSize:e.PhotoModelHelper.getLargestSize,getSizeToFit:e.PhotoModelHelper.getSizeToFit,getSizeIfExact:e.PhotoModelHelper.getSizeIfExact,isSizeSquare:e.PhotoModelHelper.isSizeSquare,isPhotoSquare:e.PhotoModelHelper.isPhotoSquare,attributes:{owner:{readOnly:!0,isModel:!0,getter:function(e,t){var r=this;return{id:r.getValue(t,"ownerNsid"),getValue:function(e){return"id"===e?r.getValue(t,"ownerNsid"):"nsid"===e?r.getValue(t,"ownerNsid"):"url"===e?r.getValue(t,"ownerUrl"):r.getValue(t,e)},toJSON:function(){return{id:r.getValue(t,"ownerNsid"),url:r.getValue(t,"ownerUrl"),pathAlias:r.getValue(t,"pathAlias"),username:r.getValue(t,"username"),realname:r.getValue(t,"realname"),displayname:r.getValue(t,"displayname"),nsid:r.getValue(t,"ownerNsid"),ownerUrl:r.getValue(t,"ownerUrl"),isMe:r.getValue(t,"isMe")}},exists:function(e){return!1}}}},pathAlias:e.PersonModelHelper.attributes.pathAlias,username:e.PersonModelHelper.attributes.username,realname:e.PersonModelHelper.attributes.realname,displayname:e.PersonModelHelper.attributes.displayname,nsid:e.PersonModelHelper.attributes.nsid,ownerUrl:e.PersonModelHelper.attributes.url,isMe:e.PersonModelHelper.attributes.isMe,engagement:{readOnly:!0,isModel:!0,getter:function(e,t){var r=this;return{getValue:function(e){return r.getValue(t,e)},toJSON:function(){return{ownerNsid:r.getValue(t,"ownerNsid"),isFaved:r.getValue(t,"isFaved"),faveCount:r.getValue(t,"faveCount"),commentCount:r.getValue(t,"commentCount"),canFave:r.getValue(t,"canFave")}},exists:function(e){return!1}}}},ownerNsid:e.PhotoModelHelper.attributes.ownerNsid,isFaved:e.PhotoModelHelper.attributes.isFaved,faveCount:e.PhotoModelHelper.attributes.faveCount,commentCount:e.PhotoModelHelper.attributes.commentCount,canFave:e.PhotoModelHelper.attributes.canFave,title:e.PhotoModelHelper.attributes.title,description:e.PhotoModelHelper.attributes.description,mediaType:e.PhotoModelHelper.attributes.mediaType,license:e.PhotoModelHelper.attributes.license,isVideo:e.PhotoModelHelper.attributes.isVideo,isOwner:e.PhotoModelHelper.attributes.isOwner,sizes:e.PhotoModelHelper.attributes.sizes,descendingSizes:e.PhotoModelHelper.attributes.descendingSizes,ascendingSizes:e.PhotoModelHelper.attributes.ascendingSizes,aspectRatio:e.PhotoModelHelper.attributes.aspectRatio,needsInterstitial:e.PhotoModelHelper.attributes.needsInterstitial,canComment:e.PhotoModelHelper.attributes.canComment,url:e.PhotoModelHelper.attributes.url,rotation:e.PhotoModelHelper.attributes.rotation,similaritySearchURL:e.PhotoModelHelper.attributes.similaritySearchURL,basicSimilaritySearchURL:e.PhotoModelHelper.attributes.basicSimilaritySearchURL,oWidth:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultValue:0},oHeight:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultValue:0},isPublic:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},isVisibleByFriends:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},isVisibleByFamily:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1}}})},"@VERSION@",{requires:["flickr-model-registry","photo-model-helper","person-model-helper","flickr-favorites-add-updater","flickr-favorites-remove-updater","photo-models","photo-engagement-models","person-models"]});YUI.add("flickr-explore-getContext-fetcher",function(e,o){"use strict";e.namespace("ListFetchers")["flickr-explore-getContext"]={run:function(t,r){var s=this;return e.Promise.all([r.callAPI("flickr.explore.getContext",this._processParams(t),!0),r.getModelRegistry("explore-models"),r.getModelRegistry("photo-models"),r.getModelRegistry("person-models"),r.getModelRegistry("photo-engagement-models"),r.getModelRegistry("photo-stats-models")]).then(function(e){return s._processResponse(e,t)},function(e){throw 1===e.code&&"Photo not in explore"===e.message&&(e.notInContext=!0),e}).then(null,e.FetcherErrorLogger(o))},_processParams:function(o){return{photo_id:o.photoId,extras:e.APIHelper.request.getRebootPhotoExtras(),num_prev:o.numPrev,num_next:o.numNext,date:o.date}},_processResponse:function(o,t){var r,s,n,p,l,a,i=o[0],h=o[1],d=o[2],g=o[3],u=o[4],m=o[5],x=[],c=[],y=d.proxy(t.photoId),M=[];return r=i.nextphotos,s=i.prevphotos,c=e.APIHelper.response.parsePhotos({photos:r.photo,personModelRegistry:g,photoModelRegistry:d,photoEngagementModelRegistry:u,photoStatsModelRegistry:m}),x=e.APIHelper.response.parsePhotos({photos:s.photo,personModelRegistry:g,photoModelRegistry:d,photoEngagementModelRegistry:u,photoStatsModelRegistry:m}),a=h.getValue(t.id,"photoContextList"),p=!!a.hasMinBoundary&&a.hasMinBoundary(),l=!!a.hasMaxBoundary&&a.hasMaxBoundary(),n=a.getList(),M=e.APIHelper.response.addOrReplaceListByContext({model:y,next:c,prev:x.reverse(),current:n,hasMin:p,hasMax:l,numNext:t.numNext,numPrev:t.numPrev}),h.setValue(t.id,"photoContextList",M),{next:c,previous:x.reverse()}}}},"@VERSION@",{requires:["flickr-promise","api-helper"],optional:["explore-models","photo-models","photo-engagement-models","photo-stats-models"]});YUI.add("explore-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,langBundles:this.details.langBundles,remote:{read:function(t){return e.ListFetchers["flickr-interestingness-getList"].run(t,this.appContext)}},attributes:{photos:{isCollection:!0,pageFetch:{listFetcher:e.ListFetchers["flickr-interestingness-getList"]}},totalItems:{defaultValue:0,setter:function(t){return(t=e.AttributeHelpers.coerceInteger(t))<0&&(t=0),t}},photoContextList:{isListProxy:!0,contextFetch:{listFetcher:e.ListFetchers["flickr-explore-getContext"],listItemIdField:"photoId"}},displayType:{readOnly:!0,defaultValue:"explore"},url:{readOnly:!0,defaultFn:function(e){return"/explore/"+e.replace(/-/g,"/")}},urlSuffix:{readOnly:!0,defaultFn:function(e){return"explore-"+e}},title:{readOnly:!0,defaultFn:function(e){return this.intlMessage({intlName:"models.EXPLORE_TITLE",id:e})}}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-interestingness-getList-fetcher","flickr-explore-getContext-fetcher"],langBundles:["models"]});YUI.add("flickr-interestingness-getList-fetcher",function(e,t){var o=100;e.namespace("ListFetchers")["flickr-interestingness-getList"]={run:function(o,r){var s,p=this,i=this._processParams(o,r);return s=[r.callAPI("flickr.interestingness.getList",i),r.getModelRegistry("explore-models"),r.getModelRegistry("photo-lite-models")],e.Promise.all(s).then(function(e){return p._processResponse(e,o)},e.FetcherErrorLogger(t))},_processParams:function(t,r){var s;return s={extras:e.APIHelper.request.getRebootPhotoLiteExtras(),per_page:t.perPage||o,page:t.page||"1",date:t.id},r.flipper.isFlipped("enable-explore-v2-api")&&(s.version="v2"),e.merge(s,t.apiParams||{})},_processResponse:function(t,o){var r,s=t[0],p=t[1],i=t[2],a={id:o.id},n=[];if(!o.id)throw new ReferenceError("No `id` provided by request.");if(!s.photos||!s.photos.photo)throw new Error("No `photos.photo` property returned by API.");return n=s.photos.photo.map(function(t){return r=e.APIHelper.response.parsePhotoLite(t),i.addOrUpdate(r)}),a.photos={perPage:s.photos.perpage,page:s.photos.page||1,pageContent:n,totalItems:s.photos.total,totalPages:s.photos.pages},a.totalItems=s.photos.total,p.addOrUpdate(a),a.photos.pageContent}}},"@VERSION@",{requires:["api-helper","flickr-promise"],optional:["explore-models","photo-lite-models"]});YUI.add("hermes-template-explore-page",function(t,a){var e=t.Template.Handlebars.revive({1:function(t,a,e,l,n){return'<button class="tool tools-menu"></button>'},3:function(t,a,e,l,n){return" selected"},5:function(t,a,e,l,n){return" is-disabled"},compiler:[7,">= 4.0.0"],main:function(t,a,e,l,n){var o,r,u=null!=a?a:{},s=e.helperMissing,i=t.escapeExpression,c="function";return i((e.outlet||a&&a.outlet||s).call(u,null!=a?a["global-nav-view"]:a,{name:"outlet",hash:{},data:n}))+"\n\n"+i((e.outlet||a&&a.outlet||s).call(u,null!=a?a["fluid-explore-subnav-view"]:a,{name:"outlet",hash:{},data:n}))+'\n\n<div role="main" class="main fluid-centered">\n\n\t<div class="title-row">\n\n\t\t<h3>'+i((e.intlMessage||a&&a.intlMessage||s).call(u,{name:"intlMessage",hash:{intlName:"common.EXPLORE"},data:n}))+'</h3>\n\n\t\t<div class="tools">\n\t\t\t'+(null!=(o=e.if.call(u,null!=a?a.godUser:a,{name:"if",hash:{},fn:t.program(1,n,0),inverse:t.noop,data:n}))?o:"")+'\n\t\t\t<div class="explore-toolbar-share-content tool">\n\t\t\t\t'+i((e.outlet||a&&a.outlet||s).call(u,null!=a?a["fluid-share-explore-view"]:a,{name:"outlet",hash:{},data:n}))+'\n\t\t\t</div>\n\t\t\t<button data-layout-style="justified" class="tool layout justified'+(null!=(o=e.if.call(u,null!=a?a.isJustifiedLayout:a,{name:"if",hash:{},fn:t.program(3,n,0),inverse:t.noop,data:n}))?o:"")+'" data-track="explore-layout-justified"></button>\n\t\t\t<button data-layout-style="story" class="tool layout story'+(null!=(o=e.if.call(u,null!=a?a.isStoryLayout:a,{name:"if",hash:{},fn:t.program(3,n,0),inverse:t.noop,data:n}))?o:"")+'" data-track="explore-layout-story"></button>\n\t\t</div>\n\n\t</div>\n\n\t'+i((e.outlet||a&&a.outlet||s).call(u,null!=a?a["photo-list-view"]:a,{name:"outlet",hash:{},data:n}))+'\n\n\t<div class="explore-pagination">\n\t\t<a href="'+i(typeof(r=null!=(r=e.prevDateLink||(null!=a?a.prevDateLink:a))?r:s)===c?r.call(u,{name:"prevDateLink",hash:{},data:n}):r)+'" class="butt page-back" data-track="explore-page-back">'+i(typeof(r=null!=(r=e.prevDateStr||(null!=a?a.prevDateStr:a))?r:s)===c?r.call(u,{name:"prevDateStr",hash:{},data:n}):r)+'</a>\n\t\t<a class="butt curr-date">'+i(typeof(r=null!=(r=e.currDateStr||(null!=a?a.currDateStr:a))?r:s)===c?r.call(u,{name:"currDateStr",hash:{},data:n}):r)+'</a>\n\t\t<a href="'+i(typeof(r=null!=(r=e.nextDateLink||(null!=a?a.nextDateLink:a))?r:s)===c?r.call(u,{name:"nextDateLink",hash:{},data:n}):r)+'" class="butt page-forward'+(null!=(o=e.if.call(u,null!=a?a.disableNext:a,{name:"if",hash:{},fn:t.program(5,n,0),inverse:t.noop,data:n}))?o:"")+'" data-track="explore-page-forward">'+i(typeof(r=null!=(r=e.nextDateStr||(null!=a?a.nextDateStr:a))?r:s)===c?r.call(u,{name:"nextDateStr",hash:{},data:n}):r)+"</a>\n\t</div>\n\n</div>\n\n"+i((e.outlet||a&&a.outlet||s).call(u,null!=a?a["signup-footer-view"]:a,{name:"outlet",hash:{},data:n}))+"\n\n"+i((e.outlet||a&&a.outlet||s).call(u,null!=a?a["footer-full-view"]:a,{name:"outlet",hash:{},data:n}))+"\n"},useData:!0}),l={};t.Array.each([],function(a){var e=t.Template.get("hermes/"+a);e&&(l[a]=e)}),t.Template.register("hermes/explore-page",function(a,n){return n=n||{},n.partials=n.partials?t.merge(l,n.partials):l,e(a,n)})},"@VERSION@",{requires:["template-base","handlebars-base"]});