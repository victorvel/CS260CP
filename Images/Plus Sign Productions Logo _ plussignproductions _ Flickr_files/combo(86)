YUI.add("set-meta-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{langBundles:this.details.langBundles,name:this.name,remote:{},attributes:{displayType:{readOnly:!0,defaultFn:function(){return"set"}},title:{validator:function(t,i){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)},defaultValue:""},owner:{isModel:!0},photoCount:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)}},videoCount:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)}},photoCountDisplay:{readOnly:!0,derivedBy:["owner"],defaultFn:function(e){var t=this.getValue(e,"photoCount"),i=this.getValue(e,"videoCount"),n="";return 0===(t-=i)&&0===i?n=this.intlMessage({intlName:"models.ZERO_PHOTOS"}):1===t&&0===i?n=this.intlMessage({intlName:"models.ONE_PHOTO"}):t>1&&0===i?n=this.intlMessage({intlName:"models.MULTIPLE_PHOTOS",photos:t}):0===t&&1===i?n=this.intlMessage({intlName:"models.ONE_VIDEO"}):1===t&&1===i?n=this.intlMessage({intlName:"models.ONE_PHOTO_AND_ONE_VIDEO"}):t>1&&1===i?n=this.intlMessage({intlName:"models.MULTIPLE_PHOTOS_AND_ONE_VIDEO",photos:t}):0===t&&i>1?n=this.intlMessage({intlName:"models.MULTIPLE_VIDEOS",videos:i}):1===t&&i>1?n=this.intlMessage({intlName:"models.ONE_PHOTO_AND_MULTIPLE_VIDEOS",videos:i}):t>1&&i>1&&(n=this.intlMessage({intlName:"models.MULTIPLE_PHOTOS_AND_MULTIPLE_VIDEOS",photos:t,videos:i})),n}},primary:{},primaryPhotoSizes:{},bestIconURL:{readOnly:!0,derivedBy:["primaryPhotoSizes"],defaultFn:function(e){var t=this.getValue(e,"primaryPhotoSizes");return t.sq?t.sq.src:void 0}},url:{readOnly:!0,derivedBy:["owner"],defaultFn:function(e){var t=this.getValue(e,"owner");return t?"/photos/"+t.getValue("pathAlias")+"/albums/"+e:void 0}},isAutoUploadSet:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},urlSuffix:{readOnly:!0,defaultFn:function(e){return"set-"+e}}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-promise"],langBundles:["models"]});YUI.add("flickr-photosets-search-fetcher",function(e,r){"use strict";function s(r){var s,t={extras:e.APIHelper.request.getRebootSearchSetsExtras(),per_page:r.perPage||50,page:r.page||1};return s=e.merge(t,r.apiParams||{}),YUI.Env.isServer&&e.SearchHelper.unescapeParameters(s),s}e.namespace("ListFetchers")["flickr-photosets-search"]={run:function(t,o){var a=this,p=t.emptyQuery?{}:s(t),i=p.user_id;return i?e.Promise.all([t.emptyQuery?e.Promise.resolve({photos:{photo:[]}}):o.callAPI("flickr.photosets.search",p),o.getModelRegistry("search-sets-models"),o.getModelRegistry("set-meta-models"),o.getModel("person-models",i)]).then(function(e){return a._processResponse(e,t)},e.FetcherErrorLogger(r)):e.Promise.reject("[flickr-photosets-search-fetcher] called without `user_id` param")},_processParams:s,_processResponse:function(r,s){var t,o,a=[],p=[],i=r[0],c=r[1],h=r[2],l=i.photosets.photoset.length;for(o=0;o<l;o++)(a=e.APIHelper.response.parsePhotoSetMeta(i.photosets.photoset[o])).owner=r[3],h.addOrUpdate(a),p.push(h.proxy(a.id));return t={id:s.id,sets:p,totalItems:p.length},c.addOrUpdate(t),t.sets}}},"@VERSION@",{requires:["flickr-promise","search-helper","api-helper","set-meta-models","querystring-parse-simple"],optional:[]});YUI.add("search-sets-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{read:function(t){return e.ListFetchers["flickr-photosets-search"].run(t,this.appContext)}},attributes:{sets:{isCollection:!0,pageFetch:{listFetcher:e.ListFetchers["flickr-photosets-search"],listItemIdField:"id"}},apiParams:{writeOnce:"initOnly"},totalItems:{setter:function(t){return(t=e.AttributeHelpers.coerceInteger(t))<0&&(t=0),t},defaultValue:0},emptyQuery:{defaultValue:!1}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-photosets-search-fetcher","search-helper"]});YUI.add("hermes-template-search-photos-unified-page-view",function(e,n){var a=e.Template.Handlebars.revive({1:function(e,n,a,l,t){return"\t"+e.escapeExpression((a.outlet||n&&n.outlet||a.helperMissing).call(null!=n?n:{},null!=n?n["search-slender-advanced-panel-view"]:n,{name:"outlet",hash:{},data:t}))+"\n"},3:function(e,n,a,l,t){var s,r=null!=n?n:{};return'\t<div class="advanced-search-wrapper'+(null!=(s=a.unless.call(r,null!=n?n.advancedPanelVisible:n,{name:"unless",hash:{},fn:e.program(4,t,0),inverse:e.noop,data:t}))?s:"")+'">\n\t\t'+e.escapeExpression((a.outlet||n&&n.outlet||a.helperMissing).call(r,null!=n?n["search-advanced-panel"]:n,{name:"outlet",hash:{},data:t}))+"\n\t</div>\n"},4:function(e,n,a,l,t){return" collapsed"},6:function(e,n,a,l,t){return" using-slender-advanced-panel"},8:function(e,n,a,l,t){return" advanced-panel-visible"},10:function(e,n,a,l,t){return" moola-search-enabled"},12:function(e,n,a,l,t){return'\t<div class="main search-empty-container">\n\t\t'+e.escapeExpression((a.outlet||n&&n.outlet||a.helperMissing).call(null!=n?n:{},null!=n?n["search-empty-view"]:n,{name:"outlet",hash:{},data:t}))+"\n\t</div>\n"},14:function(e,n,a,l,t){return'\t<div class="albums-galleries">\n\t\t<div class="main search-your-albums-results">\n\t\t'+e.escapeExpression((a.outlet||n&&n.outlet||a.helperMissing).call(null!=n?n:{},null!=n?n["search-photos-albums-view"]:n,{name:"outlet",hash:{},data:t}))+"\n\t\t</div>\n\t</div>\n"},16:function(e,n,a,l,t){return'\t<div class="main search-your-photos-results">\n\t\t'+e.escapeExpression((a.outlet||n&&n.outlet||a.helperMissing).call(null!=n?n:{},null!=n?n["search-photos-yours-view"]:n,{name:"outlet",hash:{},data:t}))+"\n\t</div>\n"},18:function(e,n,a,l,t){return'\t<div class="main search-contacts-results">\n\t\t'+e.escapeExpression((a.outlet||n&&n.outlet||a.helperMissing).call(null!=n?n:{},null!=n?n["search-photos-contacts-view"]:n,{name:"outlet",hash:{},data:t}))+"\n\t</div>\n"},20:function(e,n,a,l,t){return'\t\t<div class="main moola-search-div">\n\t\t\t'+e.escapeExpression((a.outlet||n&&n.outlet||a.helperMissing).call(null!=n?n:{},null!=n?n["moola-search-view"]:n,{name:"outlet",hash:{},data:t}))+"\n\t\t</div>\n"},22:function(e,n,a,l,t){return'\t<div class="main search-photos-results">\n\t\t'+e.escapeExpression((a.outlet||n&&n.outlet||a.helperMissing).call(null!=n?n:{},null!=n?n["search-photos-everyone-view"]:n,{name:"outlet",hash:{},data:t}))+"\n\t</div>\n"},compiler:[7,">= 4.0.0"],main:function(e,n,a,l,t){var s,r=null!=n?n:{},i=a.helperMissing,o=e.escapeExpression;return o((a.outlet||n&&n.outlet||i).call(r,null!=n?n["global-nav-view"]:n,{name:"outlet",hash:{},data:t}))+"\n\n"+o((a.outlet||n&&n.outlet||i).call(r,null!=n?n["search-subnav-slender-view"]:n,{name:"outlet",hash:{},data:t}))+"\n\n"+(null!=(s=a.if.call(r,null!=n?n.useSlenderAdvancedPanel:n,{name:"if",hash:{},fn:e.program(1,t,0),inverse:e.program(3,t,0),data:t}))?s:"")+'\n<main id="search-unified-content" class="main fluid-centered '+(null!=(s=a.if.call(r,null!=n?n.useSlenderAdvancedPanel:n,{name:"if",hash:{},fn:e.program(6,t,0),inverse:e.noop,data:t}))?s:"")+(null!=(s=a.if.call(r,null!=n?n.advancedPanelVisible:n,{name:"if",hash:{},fn:e.program(8,t,0),inverse:e.noop,data:t}))?s:"")+" "+(null!=(s=(a.isFlipped||n&&n.isFlipped||i).call(r,"enable-search-ads",{name:"isFlipped",hash:{},fn:e.program(10,t,0),inverse:e.noop,data:t}))?s:"")+'" role="main">\n\n'+(null!=(s=a.if.call(r,null!=n?n.showEmpty:n,{name:"if",hash:{},fn:e.program(12,t,0),inverse:e.noop,data:t}))?s:"")+"\n"+(null!=(s=a.if.call(r,null!=n?n.showAlbums:n,{name:"if",hash:{},fn:e.program(14,t,0),inverse:e.noop,data:t}))?s:"")+"\n"+(null!=(s=a.if.call(r,null!=n?n.showYours:n,{name:"if",hash:{},fn:e.program(16,t,0),inverse:e.noop,data:t}))?s:"")+"\n"+(null!=(s=a.if.call(r,null!=n?n.showContacts:n,{name:"if",hash:{},fn:e.program(18,t,0),inverse:e.noop,data:t}))?s:"")+"\n"+(null!=(s=a.if.call(r,null!=n?n.searchResultsOwnerIsNotPro:n,{name:"if",hash:{},fn:e.program(20,t,0),inverse:e.noop,data:t}))?s:"")+"\n"+(null!=(s=a.if.call(r,null!=n?n.showEveryones:n,{name:"if",hash:{},fn:e.program(22,t,0),inverse:e.noop,data:t}))?s:"")+"\n</main>\n\n"+o((a.outlet||n&&n.outlet||i).call(r,null!=n?n["feedback-widget-view"]:n,{name:"outlet",hash:{},data:t}))+"\n\n"+o((a.outlet||n&&n.outlet||i).call(r,null!=n?n["signup-footer-view"]:n,{name:"outlet",hash:{},data:t}))+"\n\n"+o((a.outlet||n&&n.outlet||i).call(r,null!=n?n["footer-full-view"]:n,{name:"outlet",hash:{},data:t}))+"\n"},useData:!0}),l={};e.Array.each([],function(n){var a=e.Template.get("hermes/"+n);a&&(l[n]=a)}),e.Template.register("hermes/search-photos-unified-page-view",function(n,t){return t=t||{},t.partials=t.partials?e.merge(l,t.partials):l,a(n,t)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-search-subnav",function(t,a){var n=t.Template.Handlebars.revive({1:function(t,a,n,l,e){return" using-slender-advanced-panel"},3:function(t,a,n,l,e){var s,i,r=null!=a?a:{},u=n.helperMissing,o=t.escapeExpression;return'\t\t\t\t<li class="link'+(null!=(s=n.if.call(r,null!=a?a.selected:a,{name:"if",hash:{},fn:t.program(4,e,0),inverse:t.noop,data:e}))?s:"")+'" data-id="'+o("function"==typeof(i=null!=(i=n.id||(null!=a?a.id:a))?i:u)?i.call(r,{name:"id",hash:{},data:e}):i)+'">\n\t\t\t\t\t'+(null!=(s=n.if.call(r,null!=a?a.url:a,{name:"if",hash:{},fn:t.program(6,e,0),inverse:t.noop,data:e}))?s:"")+'\n\t\t\t\t\t\t<div class="title">'+o("function"==typeof(i=null!=(i=n.title||(null!=a?a.title:a))?i:u)?i.call(r,{name:"title",hash:{},data:e}):i)+"</div>\n"+(null!=(s=n.if.call(r,null!=a?a.subtitle:a,{name:"if",hash:{},fn:t.program(8,e,0),inverse:t.noop,data:e}))?s:"")+"\t\t\t\t\t"+(null!=(s=n.if.call(r,null!=a?a.url:a,{name:"if",hash:{},fn:t.program(10,e,0),inverse:t.noop,data:e}))?s:"")+"\n\t\t\t\t</li>\n"},4:function(t,a,n,l,e){return" selected"},6:function(t,a,n,l,e){var s;return'<a href="'+t.escapeExpression("function"==typeof(s=null!=(s=n.url||(null!=a?a.url:a))?s:n.helperMissing)?s.call(null!=a?a:{},{name:"url",hash:{},data:e}):s)+'">'},8:function(t,a,n,l,e){var s;return'\t\t\t\t\t\t<div class="subtitle">'+t.escapeExpression("function"==typeof(s=null!=(s=n.subtitle||(null!=a?a.subtitle:a))?s:n.helperMissing)?s.call(null!=a?a:{},{name:"subtitle",hash:{},data:e}):s)+"</div>\n"},10:function(t,a,n,l,e){return"</a>"},12:function(t,a,n,l,e){var s,i,r=null!=a?a:{},u=n.helperMissing,o=t.escapeExpression;return'\t\t\t\t<li class="tool inactive-toggle" data-id="'+o("function"==typeof(i=null!=(i=n.id||(null!=a?a.id:a))?i:u)?i.call(r,{name:"id",hash:{},data:e}):i)+'">\n\t\t\t\t\t<div class="radio">\n\t\t\t\t\t\t<input type="checkbox" id="inactive-groups-toggle" name="radio-small"'+(null!=(s=n.if.call(r,null!=a?a.inactiveToggleChecked:a,{name:"if",hash:{},fn:t.program(13,e,0),inverse:t.noop,data:e}))?s:"")+'>\n\t\t\t\t\t\t<label for="inactive-groups-toggle">\n\t\t\t\t\t\t\t<div class="square"></div>\n\t\t\t\t\t\t\t<span>'+o((n.intlHTMLMessage||a&&a.intlHTMLMessage||u).call(r,{name:"intlHTMLMessage",hash:{intlName:"search.HIDE_INACTIVE_GROUPS"},data:e}))+"</span>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t</li>\n"},13:function(t,a,n,l,e){return' checked="checked"'},15:function(t,a,n,l,e){var s,i,r=null!=a?a:{},u=n.helperMissing,o=t.escapeExpression;return'\t\t\t\t<li class="tool toggle toggle-view-type toggle-justified'+(null!=(s=n.if.call(r,null!=a?a.viewTypeJustified:a,{name:"if",hash:{},fn:t.program(4,e,0),inverse:t.noop,data:e}))?s:"")+'" data-id="'+o("function"==typeof(i=null!=(i=n.id||(null!=a?a.id:a))?i:u)?i.call(r,{name:"id",hash:{},data:e}):i)+'">\n\t\t\t\t\t<a href="'+o("function"==typeof(i=null!=(i=n.justUrl||(null!=a?a.justUrl:a))?i:u)?i.call(r,{name:"justUrl",hash:{},data:e}):i)+'" title="'+o((n.intlHTMLMessage||a&&a.intlHTMLMessage||u).call(r,{name:"intlHTMLMessage",hash:{intlName:"search.JUSTIFIED_VIEW"},data:e}))+'" class="toggle-view just" data-track="search-layout-justified"></a>\n\t\t\t\t</li>\n\t\t\t\t<li class="tool toggle toggle-view-type toggle-thumb'+(null!=(s=n.unless.call(r,null!=a?a.viewTypeJustified:a,{name:"unless",hash:{},fn:t.program(4,e,0),inverse:t.noop,data:e}))?s:"")+'" data-id="'+o("function"==typeof(i=null!=(i=n.id||(null!=a?a.id:a))?i:u)?i.call(r,{name:"id",hash:{},data:e}):i)+'">\n\t\t\t\t\t<a href="'+o("function"==typeof(i=null!=(i=n.thumbUrl||(null!=a?a.thumbUrl:a))?i:u)?i.call(r,{name:"thumbUrl",hash:{},data:e}):i)+'" title="'+o((n.intlHTMLMessage||a&&a.intlHTMLMessage||u).call(r,{name:"intlHTMLMessage",hash:{intlName:"search.THUMBNAIL_VIEW"},data:e}))+'" class="toggle-view thumb" data-track="search-layout-thumbs"></a>\n\t\t\t\t</li>\n'},17:function(t,a,n,l,e){var s,i,r=null!=a?a:{},u=n.helperMissing,o=t.escapeExpression;return'\t\t\t\t<li class="tool sort" data-id="'+o("function"==typeof(i=null!=(i=n.id||(null!=a?a.id:a))?i:u)?i.call(r,{name:"id",hash:{},data:e}):i)+'">\n\t\t\t\t\t<a href="#" title="'+o((n.intlHTMLMessage||a&&a.intlHTMLMessage||u).call(r,{name:"intlHTMLMessage",hash:{intlName:"search.SORT"},data:e}))+'" class="menu-anchor">'+o(t.lambda(null!=(s=null!=a?a.selectedSort:a)?s.text:s,a))+"<span></span></a>\n\t\t\t\t</li>\n"},19:function(t,a,n,l,e){var s,i,r=null!=a?a:{},u=n.helperMissing,o=t.escapeExpression;return'\t\t\t\t<li class="tool toggle toggle-advanced'+(null!=(s=n.if.call(r,null!=a?a.advancedPanelVisible:a,{name:"if",hash:{},fn:t.program(20,e,0),inverse:t.noop,data:e}))?s:"")+'" data-id="'+o("function"==typeof(i=null!=(i=n.id||(null!=a?a.id:a))?i:u)?i.call(r,{name:"id",hash:{},data:e}):i)+'">\n\t\t\t\t\t<a title="'+o((n.intlHTMLMessage||a&&a.intlHTMLMessage||u).call(r,{name:"intlHTMLMessage",hash:{intlName:"search.TOGGLE_ADVANCED"},data:e}))+'" href="#"><span></span>'+o((n.intlHTMLMessage||a&&a.intlHTMLMessage||u).call(r,{name:"intlHTMLMessage",hash:{intlName:"search.ADVANCED"},data:e}))+"</a>\n\t\t\t\t</li>\n"},20:function(t,a,n,l,e){return" advanced-visible"},22:function(t,a,n,l,e){return'\t\t\t\t\t<li class="tool advanced-clear">\n\t\t\t\t\t\t<a href="#" class="advanced-clear-link">'+t.escapeExpression((n.intlHTMLMessage||a&&a.intlHTMLMessage||n.helperMissing).call(null!=a?a:{},{name:"intlHTMLMessage",hash:{intlName:"search.CLEAR"},data:e}))+"</a>\n\t\t\t\t\t</li>\n"},compiler:[7,">= 4.0.0"],main:function(t,a,n,l,e){var s,i=null!=a?a:{};return'<div class="search-subnav'+(null!=(s=n.if.call(i,null!=a?a.usingSlenderAdvancedPanel:a,{name:"if",hash:{},fn:t.program(1,e,0),inverse:t.noop,data:e}))?s:"")+'">\n\n\t<div class="search-subnav-sizing fluid-centered">\n\n\t\t<div class="search-subnav-content">\n\n\t\t\t<ul class="links">\n\n'+(null!=(s=n.each.call(i,null!=a?a.links:a,{name:"each",hash:{},fn:t.program(3,e,0),inverse:t.noop,data:e}))?s:"")+'\n\t\t\t</ul>\n\n\t\t\t<ul class="tools">\n\n'+(null!=(s=n.if.call(i,null!=a?a.showInactiveToggle:a,{name:"if",hash:{},fn:t.program(12,e,0),inverse:t.noop,data:e}))?s:"")+(null!=(s=n.if.call(i,null!=a?a.showTools:a,{name:"if",hash:{},fn:t.program(15,e,0),inverse:t.noop,data:e}))?s:"")+(null!=(s=n.if.call(i,null!=a?a.showSort:a,{name:"if",hash:{},fn:t.program(17,e,0),inverse:t.noop,data:e}))?s:"")+(null!=(s=n.if.call(i,null!=a?a.showAdvanced:a,{name:"if",hash:{},fn:t.program(19,e,0),inverse:t.noop,data:e}))?s:"")+(null!=(s=n.if.call(i,null!=a?a.showAdvancedClearLink:a,{name:"if",hash:{},fn:t.program(22,e,0),inverse:t.noop,data:e}))?s:"")+"\n\n\t\t\t</ul>\n\t\t</div>\n\n\t</div>\n\n</div>\n"},useData:!0}),l={};t.Array.each([],function(a){var n=t.Template.get("hermes/"+a);n&&(l[a]=n)}),t.Template.register("hermes/search-subnav",function(a,e){return e=e||{},e.partials=e.partials?t.merge(l,e.partials):l,n(a,e)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("search-subnav-slender-view",function(e){var r=[{id:"photos",intlKey:"search.PHOTOS",searchType:e.SearchUrl.searchTypes.PHOTOS},{id:"people",intlKey:"search.PEOPLE",searchType:e.SearchUrl.searchTypes.PEOPLE},{id:"groups",intlKey:"search.GROUPS",searchType:e.SearchUrl.searchTypes.GROUPS}];e.namespace("Views")[this.name]=e.Base.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(a){var t,s=this,h=a.modelParams&&a.modelParams.apiParams?e.merge(a.modelParams.apiParams):{},i=[];return this.set("searchType",a.searchType),this.set("searchUrl",new e.SearchUrl(h,this.appContext,this.get("searchType"))),this.set("showAdvancedClearLink",this.get("searchType")===e.SearchUrl.searchTypes.PHOTOS&&this.get("searchUrl").hasAdvancedParams(!1)),r.forEach(function(r){(t=e.merge(r,{title:s.intlMessage({intlName:r.intlKey}),url:s.buildTabUrl(r.id,r.searchType),selected:r.searchType===s.get("searchType")})).selected&&(s.set("currentTabUrl",t.url),s.set("currentTabId",t.id)),i.push(t)}),this.set("links",i),this},buildContainer:function(){return this.setContainerWithTemplate("search-subnav",{showInactiveToggle:!1,showTools:!1,selectedSort:!1,showSort:!1,showAdvanced:!1,usingSlenderAdvancedPanel:!0,links:this.get("links"),showAdvancedClearLink:this.get("showAdvancedClearLink")}),this},activate:function(){return e.SearchUrl.isSearchUrl(this.appContext.getPreviousURL())||this.clearStoredTabUrls(),this.get("currentTabUrl")&&this.get("currentTabId")&&this.storeTabUrl(this.get("currentTabUrl"),this.get("currentTabId")),this.get("showAdvancedClearLink")&&this.registerEventHandler(this.get("container").one(".advanced-clear-link").on("click",this.handleClearAdvancedSearchClick.bind(this))),this},buildTabUrl:function(r,a){var t,s=a!==this.get("searchType")?this.checkForStoredUrl(r):null,h=this.get("searchUrl").getSearchTerm();return s?h!==(t=new e.SearchUrl(s,this.appContext,a)).getSearchTerm()&&t.removeScope().resetToUnified().setSearchTerm(h):(t=this.get("searchUrl").clone().setSearchType(a),a!==this.get("searchType")&&(t.removeAPIParam(e.SearchHelper.API.sort),t.removeAPIParam(e.SearchHelper.API.safeSearch)),a!==e.SearchUrl.searchTypes.PHOTOS&&t.removeScope()),t.getURL()},checkForStoredUrl:function(r){var a,t;return YUI.Env.isServer||(t=this.getStorageKeyFromTabId(r),a=e.StorageHelper.getItem(t,!0)),a},clearStoredTabUrls:function(){var r,a=this;YUI.Env.isServer||this.get("links").forEach(function(t){r=a.getStorageKeyFromTabId(t.id),e.StorageHelper.remove(r,!0)})},storeTabUrl:function(r,a){var t;YUI.Env.isServer||(t=this.getStorageKeyFromTabId(a),e.StorageHelper.setItem(t,r,!0))},getStorageKeyFromTabId:function(e){return"searchUrl-"+e},handleClearAdvancedSearchClick:function(r){var a,t=this.get("searchUrl").getSearchTerm(),s=this.get("searchUrl").getAPIParams();r.halt(),e.SearchHelper.clearParamsExceptSearchScope(s),delete s[e.SearchHelper.API.commons],a=new e.SearchUrl(s,this.appContext,this.searchType),t&&a.setSearchTerm(t),this.appContext.flapp.navigate(a.getURL())}})},"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-search-subnav","storage-helper","search-helper","search-url"],langBundles:["search"]});YUI.add("hermes-template-search-empty",function(e,a){var t=e.Template.Handlebars.revive({1:function(e,a,t,n,s){return" using-slender-advanced-panel"},3:function(e,a,t,n,s){var l,r=e.escapeExpression;return'\t\t\t<div class="no-results-message">\n\t\t\t\t<h5>'+r(e.lambda(null!=(l=null!=a?a.noMatchesForQuery:a)?l.noMatchesText:l,a))+"</h5>\n\t\t\t\t<h5>"+r((t.intlMessage||a&&a.intlMessage||t.helperMissing).call(null!=a?a:{},{name:"intlMessage",hash:{intlName:"search.TRY_DIFFERENT_BROADER"},data:s}))+"</h5>\n\t\t\t</div>\n"},5:function(e,a,t,n,s){var l=null!=a?a:{},r=t.helperMissing,i=e.escapeExpression;return'\t\t\t<div class="no-results-message">\n\t\t\t\t<h5>'+i((t.intlMessage||a&&a.intlMessage||r).call(l,{name:"intlMessage",hash:{intlName:"search.API_ERROR_HEADER"},data:s}))+"</h5>\n\t\t\t\t<h5>"+i((t.intlMessage||a&&a.intlMessage||r).call(l,{name:"intlMessage",hash:{intlName:"search.API_ERROR_SUBHEADER"},data:s}))+"</h5>\n\t\t\t</div>\n"},compiler:[7,">= 4.0.0"],main:function(e,a,t,n,s){var l,r,i=null!=a?a:{},c=t.helperMissing,h=e.escapeExpression;return'<div class="search-empty'+(null!=(l=t.if.call(i,null!=a?a.usingSlenderAdvancedPanel:a,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+'">\n\t<div class="no-results-message-container">\n'+(null!=(l=t.if.call(i,null!=a?a.noMatchesForQuery:a,{name:"if",hash:{},fn:e.program(3,s,0),inverse:e.noop,data:s}))?l:"")+(null!=(l=t.if.call(i,null!=a?a.apiFailed:a,{name:"if",hash:{},fn:e.program(5,s,0),inverse:e.noop,data:s}))?l:"")+'\t</div>\n\n\t<div class="search-box-container">\n\t\t<form method="GET" action="/search/" role="search">\n\t\t\t<div class="search-icon"></div>\n\t\t\t<input type="text" name="text" class="search-box" placeholder="'+h("function"==typeof(r=null!=(r=t.searchPlaceholder||(null!=a?a.searchPlaceholder:a))?r:c)?r.call(i,{name:"searchPlaceholder",hash:{},data:s}):r)+'" role="textbox" autofocus>\n\t\t\t<button type="submit" class="large search-button">'+h((t.intlMessage||a&&a.intlMessage||c).call(i,{name:"intlMessage",hash:{intlName:"search.SEARCH"},data:s}))+"</button>\n\t\t</form>\n\t</div>\n</div>\n"},useData:!0}),n={};e.Array.each([],function(a){var t=e.Template.get("hermes/"+a);t&&(n[a]=t)}),e.Template.register("hermes/search-empty",function(a,s){return s=s||{},s.partials=s.partials?e.merge(n,s.partials):n,t(a,s)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("search-empty-view",function(e){"use strict";e.namespace("Views")[this.name]=e.Base.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(a){var t=a.modelParams&&a.modelParams.apiParams?e.merge(a.modelParams.apiParams):{};this.searchUrl=new e.SearchUrl(t,this.appContext,a.searchType||e.SearchUrl.searchTypes.UNDEFINED),this.searchType=a.searchType,this.isMobile=a.isMobile,""===this.get("container").get("innerHTML")&&this.setContainerHTML("")},buildContainer:function(){var a="search.PHOTOS_PEOPLE_OR_GROUPS";return this.isMobile&&(this.searchType===e.SearchUrl.searchTypes.PHOTOS?a="search.SEARCH_PHOTOS":this.searchType===e.SearchUrl.searchTypes.PEOPLE?a="search.SEARCH_PEOPLE":this.searchType===e.SearchUrl.searchTypes.GROUPS&&(a="search.SEARCH_GROUPS")),a=this.intlMessage({intlName:a}),this.setContainerWithTemplate("search-empty",{searchPlaceholder:a,noMatchesForQuery:this.get("noMatchesForQuery"),apiFailed:this.get("apiFailed"),usingSlenderAdvancedPanel:this.appContext.flipper.isFlipped("enable-slender-advanced-search")}),this},activate:function(){var e,a,t=this.get("container").one(".search-box-container form"),r=this;return e=t.one("input.search-box"),this.isMobile||this.registerEventHandler(e.on("keyup",this.handleSearchFieldKeyUp.bind(this))),t&&(this.registerEventHandler(t.on("submit",function(t){a=r.searchUrl.createNewSearch(e.get("value")).getURL(),t.halt(),r.appContext.flapp.navigate(a)})),setTimeout(function(){e.focus()},500)),this},enableBlankState:function(e){this.get("container").addClass("blank")},handleSearchFieldKeyUp:function(a){var t=a.target,r=t.get("value");r.length>0&&(this.enableBlankState(),e.fire("transfer-to-gn-search",r),t.set("value",""))},onParentViewEvent:function(e,a){a&&"error-msg-updated"===a[0]&&this.isBuilt&&this.buildContainer()}},{ATTRS:{noMatchesForQuery:{value:!1,validator:function(e,a){return!e||"object"==typeof e&&e.hasOwnProperty("noMatchesText")}},apiFailed:{value:!1,validator:function(a,t){return e.AttributeHelpers.validateBoolean(a)}}}})},"@VERSION@",{requires:["flickr-view","flickr-promise","search-url","attribute-helpers","hermes-template-search-empty"],langBundles:["search"]});